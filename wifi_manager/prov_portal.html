<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name='viewport' content='width=device-width, initial-scale=1'/><script src='util-min.js.gz'></script></head><style>body{font-family:sans-serif;}*{font-size:1em}body{text-align:center}h1{font-size:1.25em}h3{color:#ff8c00;font-weight:normal}fieldset{border:0}button{height:2em}.msgbox{opacity:0;color:white;border-radius:0.5em;padding:0.5em;margin:auto;max-width:20em;transition:opacity 1s;}#msg_ok{background:#04AA6D}#msg_fail{background:#f44336}</style><body><script>(ml_div+ml('h1')(['WiFi Provision','WiFi 配网'])+ml('h3')(['Note: 5GHz WiFi is not supported,<br>make sure 2.4GHz is enabled on your router.','注意：设备不支持 5GHz 频段 WiFi，<br>请确保您的路由器开启 2.4GHz 频段.'])+ml('p')(['Enter the SSID and password<br>of your home/office WiFi','请输入您家里或办公室的 WiFi 名和密码'])+j2h({'<>':'form',html:{'<>':'fieldset',html:j2h({'{}':split,html:[ml('label'),'<br>',{'<>':'input',name:_2,id:_2,type:_3},'<br><br>']}).batch}})(['SSID/WiFi 名/ssid/text','Password/密码/pw/password'])+ml('button',{onclick:'sub()'})(['Connect','连接'])+'<br><br>'+ml('div',{'{}':split,id:_2,class:'msgbox'}).batch(["WiFi connected, device will reboot/WiFi 已连接，设备将重启/msg_ok","Incorrect SSID or Password/WiFi 名或密码错误/msg_fail"])).dom();q('select').attr('value','zh-cn').oninput();enable=en=>['fieldset','button'].map(k=>q(k).toggleAttribute('disabled',!en));sub=()=>{fetch('/conn',{method:'POST',body:JSON.stringify(Object.fromEntries(new FormData(q('form'))))}).then(r=>r.json()).then(o=>{console.log(o);enable(1);q('#pw').value='';var box=q('#msg_'+['fail','ok'][o.success]);box.css({'display':'block','opacity':0.75});setTimeout(()=>box.css('opacity',0),5000);});enable(0);}</script></body></html>